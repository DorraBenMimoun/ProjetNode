<div class="flex">
  <!-- Sidebar sous la navbar -->
  <aside class="w-1/4 min-h-screen p-6 bg-white shadow-md fixed left-0 top-[60px]">
      <h2>Ajouter un Projet</h2>
<br>
      <form [formGroup]="projectForm" (ngSubmit)="addProject()" class="project-form">
          <input formControlName="name" placeholder="Nom du projet" required />
          <textarea formControlName="description" placeholder="Description"></textarea>
          <button type="submit" [disabled]="!projectForm.valid">Ajouter Projet</button>
      </form>
  </aside>
  <!-- Contenu des projets -->
  <main class="ml-1/4 w-3/4 p-6 pt-[80px] 
  ">
      <h2>Liste des Projets</h2>
<br>
      <div class="projects-list grid grid-cols-2 gap-6">
          <div *ngFor="let project of projects" class="project-card relative">
              <!-- Actions en haut à droite -->
              <div class="absolute top-2 right-2 flex gap-2">
                  <button (click)="deleteProject(project._id)" class="icon-btn">🗑️</button>
                  <button *ngIf="!project.archived" (click)="archiveProject(project._id)" class="icon-btn">📦</button>
                  <button *ngIf="project.archived" (click)="unarchiveProject(project._id)" class="icon-btn">🔓</button>
              </div>

              <!-- Contenu du projet -->
              <h3>{{ project.name }}</h3>
              <p>{{ project.description }}</p>
              <p><strong>Propriétaire:</strong> {{ project.owner?.email }}</p>

              <!-- Tâches -->
              <div class="tasks">
                  <h4>Tâches</h4>
                  <ul>
                      <li *ngFor="let task of project.tasks">{{ task.title }} ({{ task.status }})</li>
                  </ul>
              </div>

              <!-- Membres -->
              <div class="members">
                  <h4>Membres</h4>
                  <ul>
                      <li *ngFor="let member of project.members">
                          {{ member.email }}
                          <button (click)="removeMember(project._id, member.email)">❌</button>
                      </li>
                  </ul>

                  <input [(ngModel)]="newMemberEmail[project._id]" placeholder="Email du membre">
                  <p *ngIf="addMemberErrorMessage" class="error" style="color: red; text-align: center;">{{ addMemberErrorMessage }}</p>

                  <br><br>
                  <button (click)="addMember(project._id, newMemberEmail[project._id])">Ajouter</button>       
   
              </div>
          </div>
      </div>
  </main>

</div>
