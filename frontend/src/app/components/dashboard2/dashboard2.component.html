<div class="dashboard-container">
  
    <!-- KPIs -->
    <div class="stats">
        <div class="stat-card">
          <h3>📌 Projets</h3>
          <p *ngIf="totalProjects !== null && totalProjects !== undefined; else loading"> {{ totalProjects }} </p>
        </div>
        <div class="stat-card">
          <h3>✅ Tâches</h3>
          <p *ngIf="totalTasks !== null && totalTasks !== undefined; else loading"> {{ totalTasks }} </p>
        </div>
        <div class="stat-card">
          <h3>👥 Collaborateurs</h3>
          <p *ngIf="totalCollaborators !== null && totalCollaborators !== undefined; else loading"> {{ totalCollaborators }} </p>
        </div>
      </div>
      
      <ng-template #loading>
        <p>Chargement...</p>
      </ng-template>

<!-- SECTION DES GRAPHIQUES -->
<div class="charts-section">

    <!-- Graphique Répartition des Tâches -->
    <div class="chart-container" *ngIf="taskStatusData.length > 0; else noData">
      <h3>📌 Répartition des tâches</h3>
      <ngx-charts-pie-chart 
        [results]="taskStatusData"
        [view]="[400, 300]"
        [labels]="true"
        [doughnut]="false"
        [animations]="true">
      </ngx-charts-pie-chart>
    </div>
  
    <ng-template #noData>
      <p>Pas de données disponibles pour la répartition des tâches.</p>
    </ng-template>
  </div>
  
    <!-- Temps moyen de complétion -->
    <div class="completion-time">
      <h3>⏳ Temps moyen de complétion</h3>
      <p>{{ avgCompletionTime }}</p>
    </div>
  </div>
  